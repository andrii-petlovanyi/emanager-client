{"ast":null,"code":"import _defineProperty from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'../../../utils/axios';var initialState={posts:[],loading:false};export var createPost=createAsyncThunk('post/createPost',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(params){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('/posts',params);case 3:_yield$axios$post=_context.sent;data=_yield$axios$post.data;return _context.abrupt(\"return\",data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}());export var getAllPost=createAsyncThunk('post/getAllPosts',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('/posts');case 3:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;return _context2.abrupt(\"return\",data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);})));export var removePost=createAsyncThunk('post/removePost',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var _yield$axios$delete,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"posts/\".concat(id),id);case 3:_yield$axios$delete=_context3.sent;data=_yield$axios$delete.data;return _context3.abrupt(\"return\",data);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x2){return _ref3.apply(this,arguments);};}());export var updatePost=createAsyncThunk('post/updatePost',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(updatedPost){var _yield$axios$put,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.put(\"posts/\".concat(updatedPost.id),updatedPost);case 3:_yield$axios$put=_context4.sent;data=_yield$axios$put.data;return _context4.abrupt(\"return\",data);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function(_x3){return _ref4.apply(this,arguments);};}());export var postSlice=createSlice({name:'post',initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,createPost.pending,function(state){state.loading=true;}),_defineProperty(_extraReducers,createPost.fulfilled,function(state,action){state.loading=false;state.posts.push(action.payload);}),_defineProperty(_extraReducers,createPost.rejected,function(state){state.loading=false;}),_defineProperty(_extraReducers,getAllPost.pending,function(state){state.loading=true;}),_defineProperty(_extraReducers,getAllPost.fulfilled,function(state,action){state.loading=false;state.posts=action.payload.posts;}),_defineProperty(_extraReducers,getAllPost.rejected,function(state){state.loading=false;}),_defineProperty(_extraReducers,removePost.pending,function(state){state.loading=true;}),_defineProperty(_extraReducers,removePost.fulfilled,function(state,action){state.loading=false;state.posts=state.posts.filter(function(post){return post._id!==action.payload._id;});}),_defineProperty(_extraReducers,removePost.rejected,function(state){state.loading=false;}),_defineProperty(_extraReducers,updatePost.pending,function(state){state.loading=true;}),_defineProperty(_extraReducers,updatePost.fulfilled,function(state,action){state.loading=false;var index=state.posts.findIndex(function(post){return post._id===action.payload._id;});state.posts[index]=action.payload;}),_defineProperty(_extraReducers,updatePost.rejected,function(state){state.loading=false;}),_extraReducers)});export default postSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","posts","loading","createPost","params","post","data","console","log","getAllPost","get","removePost","id","delete","updatePost","updatedPost","put","postSlice","name","reducers","extraReducers","pending","state","fulfilled","action","push","payload","rejected","filter","_id","index","findIndex","reducer"],"sources":["/Users/andrepetlovany/Desktop/GIT/elx/client/src/redux/features/post/postSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from '../../../utils/axios';\n\nconst initialState = {\n    posts: [],\n    loading: false,\n}\n\nexport const createPost = createAsyncThunk('post/createPost', async (params) => {\n    try {\n        const { data } = await axios.post('/posts', params)\n        return data\n    } catch(error) {console.log(error)}\n})\n\nexport const getAllPost = createAsyncThunk('post/getAllPosts', async () => {\n    try {\n        const { data } = await axios.get('/posts')\n        return data\n    } catch (error) {\n        console.log(error)\n    }\n})\n\nexport const removePost = createAsyncThunk('post/removePost', async (id) => {\n    try {\n        const { data } = await axios.delete(`posts/${id}`, id)\n        return data\n    } catch (error) { console.log(error)}\n})\n\nexport const updatePost = createAsyncThunk('post/updatePost', async (updatedPost) => {\n    try {\n        const { data } = await axios.put(`posts/${updatedPost.id}`, updatedPost)\n        return data\n    } catch (error) { console.log(error)}\n})\n\nexport const postSlice = createSlice({\n    name: 'post',\n    initialState,\n    reducers: {},\n    extraReducers: {\n        //create post\n        [createPost.pending]: (state) => {\n            state.loading = true\n        },\n        [createPost.fulfilled]: (state, action) => {\n            state.loading = false\n            state.posts.push(action.payload)\n        },\n        [createPost.rejected]: (state) => {\n            state.loading = false\n        },\n\n        //Get all posts\n        [getAllPost.pending]: (state) => {\n            state.loading = true\n        },\n        [getAllPost.fulfilled]: (state, action) => {\n            state.loading = false\n            state.posts = action.payload.posts\n        },\n        [getAllPost.rejected]: (state) => {\n            state.loading = false\n        },\n\n        //Delete post\n        [removePost.pending]: (state) => {\n            state.loading = true\n        },\n        [removePost.fulfilled]: (state, action) => {\n            state.loading = false\n            state.posts = state.posts.filter(\n                (post) => post._id !== action.payload._id,\n            )\n        },\n        [removePost.rejected]: (state) => {\n            state.loading = false\n        },\n\n        //Edit post\n        [updatePost.pending]: (state) => {\n            state.loading = true\n        },\n        [updatePost.fulfilled]: (state, action) => {\n            state.loading = false\n            const index = state.posts.findIndex((post) => post._id === action.payload._id)\n            state.posts[index] = action.payload\n        },\n        [updatePost.rejected]: (state) => {\n            state.loading = false\n        },\n    },\n})\n\nexport default postSlice.reducer"],"mappings":"2aAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,sBAAlB,CAEA,GAAMC,aAAY,CAAG,CACjBC,KAAK,CAAE,EADU,CAEjBC,OAAO,CAAE,KAFQ,CAArB,CAKA,MAAO,IAAMC,WAAU,CAAGL,gBAAgB,CAAC,iBAAD,4FAAoB,iBAAOM,MAAP,qLAE/BL,MAAK,CAACM,IAAN,CAAW,QAAX,CAAqBD,MAArB,CAF+B,wCAE9CE,IAF8C,mBAE9CA,IAF8C,iCAG/CA,IAH+C,0DAI1CC,OAAO,CAACC,GAAR,cAJ0C,oEAApB,+DAAnC,CAOP,MAAO,IAAMC,WAAU,CAAGX,gBAAgB,CAAC,kBAAD,wEAAqB,4MAEhCC,MAAK,CAACW,GAAN,CAAU,QAAV,CAFgC,wCAE/CJ,IAF+C,kBAE/CA,IAF+C,kCAGhDA,IAHgD,6DAKvDC,OAAO,CAACC,GAAR,eALuD,sEAArB,GAAnC,CASP,MAAO,IAAMG,WAAU,CAAGb,gBAAgB,CAAC,iBAAD,6FAAoB,kBAAOc,EAAP,6LAE/Bb,MAAK,CAACc,MAAN,iBAAsBD,EAAtB,EAA4BA,EAA5B,CAF+B,2CAE9CN,IAF8C,qBAE9CA,IAF8C,kCAG/CA,IAH+C,6DAIxCC,OAAO,CAACC,GAAR,eAJwC,sEAApB,iEAAnC,CAOP,MAAO,IAAMM,WAAU,CAAGhB,gBAAgB,CAAC,iBAAD,6FAAoB,kBAAOiB,WAAP,0LAE/BhB,MAAK,CAACiB,GAAN,iBAAmBD,WAAW,CAACH,EAA/B,EAAqCG,WAArC,CAF+B,wCAE9CT,IAF8C,kBAE9CA,IAF8C,kCAG/CA,IAH+C,6DAIxCC,OAAO,CAACC,GAAR,eAJwC,sEAApB,iEAAnC,CAOP,MAAO,IAAMS,UAAS,CAAGpB,WAAW,CAAC,CACjCqB,IAAI,CAAE,MAD2B,CAEjClB,YAAY,CAAZA,YAFiC,CAGjCmB,QAAQ,CAAE,EAHuB,CAIjCC,aAAa,mDAERjB,UAAU,CAACkB,OAFH,CAEa,SAACC,KAAD,CAAW,CAC7BA,KAAK,CAACpB,OAAN,CAAgB,IAAhB,CACH,CAJQ,iCAKRC,UAAU,CAACoB,SALH,CAKe,SAACD,KAAD,CAAQE,MAAR,CAAmB,CACvCF,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACAoB,KAAK,CAACrB,KAAN,CAAYwB,IAAZ,CAAiBD,MAAM,CAACE,OAAxB,EACH,CARQ,iCASRvB,UAAU,CAACwB,QATH,CASc,SAACL,KAAD,CAAW,CAC9BA,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACH,CAXQ,iCAcRO,UAAU,CAACY,OAdH,CAca,SAACC,KAAD,CAAW,CAC7BA,KAAK,CAACpB,OAAN,CAAgB,IAAhB,CACH,CAhBQ,iCAiBRO,UAAU,CAACc,SAjBH,CAiBe,SAACD,KAAD,CAAQE,MAAR,CAAmB,CACvCF,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACAoB,KAAK,CAACrB,KAAN,CAAcuB,MAAM,CAACE,OAAP,CAAezB,KAA7B,CACH,CApBQ,iCAqBRQ,UAAU,CAACkB,QArBH,CAqBc,SAACL,KAAD,CAAW,CAC9BA,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACH,CAvBQ,iCA0BRS,UAAU,CAACU,OA1BH,CA0Ba,SAACC,KAAD,CAAW,CAC7BA,KAAK,CAACpB,OAAN,CAAgB,IAAhB,CACH,CA5BQ,iCA6BRS,UAAU,CAACY,SA7BH,CA6Be,SAACD,KAAD,CAAQE,MAAR,CAAmB,CACvCF,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACAoB,KAAK,CAACrB,KAAN,CAAcqB,KAAK,CAACrB,KAAN,CAAY2B,MAAZ,CACV,SAACvB,IAAD,QAAUA,KAAI,CAACwB,GAAL,GAAaL,MAAM,CAACE,OAAP,CAAeG,GAAtC,EADU,CAAd,CAGH,CAlCQ,iCAmCRlB,UAAU,CAACgB,QAnCH,CAmCc,SAACL,KAAD,CAAW,CAC9BA,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACH,CArCQ,iCAwCRY,UAAU,CAACO,OAxCH,CAwCa,SAACC,KAAD,CAAW,CAC7BA,KAAK,CAACpB,OAAN,CAAgB,IAAhB,CACH,CA1CQ,iCA2CRY,UAAU,CAACS,SA3CH,CA2Ce,SAACD,KAAD,CAAQE,MAAR,CAAmB,CACvCF,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACA,GAAM4B,MAAK,CAAGR,KAAK,CAACrB,KAAN,CAAY8B,SAAZ,CAAsB,SAAC1B,IAAD,QAAUA,KAAI,CAACwB,GAAL,GAAaL,MAAM,CAACE,OAAP,CAAeG,GAAtC,EAAtB,CAAd,CACAP,KAAK,CAACrB,KAAN,CAAY6B,KAAZ,EAAqBN,MAAM,CAACE,OAA5B,CACH,CA/CQ,iCAgDRZ,UAAU,CAACa,QAhDH,CAgDc,SAACL,KAAD,CAAW,CAC9BA,KAAK,CAACpB,OAAN,CAAgB,KAAhB,CACH,CAlDQ,iBAJoB,CAAD,CAA7B,CA0DP,cAAee,UAAS,CAACe,OAAzB"},"metadata":{},"sourceType":"module"}