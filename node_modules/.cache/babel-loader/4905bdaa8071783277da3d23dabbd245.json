{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'../utils/axios';import React,{useEffect}from'react';import{useCallback,useState}from'react';import{useDispatch}from'react-redux';import{useNavigate,useParams}from'react-router-dom';import'../index.css';import{updatePost}from'../redux/features/post/postSlice';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EditPostPage=function EditPostPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),model=_useState2[0],setModel=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),urlOff=_useState4[0],setOff=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),urlBook=_useState6[0],setBook=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),info=_useState8[0],setInfo=_useState8[1];var dispatch=useDispatch();var navigate=useNavigate();var params=useParams();var fetchPost=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/posts/\".concat(params.id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setModel(data.model);setInfo(data.info);setOff(data.urlOff);setBook(data.urlBook);case 8:case\"end\":return _context.stop();}}},_callee);})),[params.id]);var submitHandler=function submitHandler(){try{var updatedPost=new FormData();updatedPost.append('model',model);updatedPost.append('info',info);updatedPost.append('urlOff',urlOff);updatedPost.append('urlBook',urlBook);updatedPost.append('id',params.id);dispatch(updatePost(updatedPost));navigate('/posts');toast('Запис успішно оновлено');}catch(error){console.log(error);}};useEffect(function(){fetchPost();},[fetchPost]);return/*#__PURE__*/_jsxs(\"form\",{className:\"postsEdit\",onSubmit:function onSubmit(e){return e.preventDefault();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:model,onChange:function onChange(e){return setModel(e.target.value);},placeholder:\"\\u041C\\u043E\\u0434\\u0435\\u043B\\u044C\",className:\"inputEdit model\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:urlOff,onChange:function onChange(e){return setOff(e.target.value);},placeholder:\"URL \\u043E\\u0444\\u0444 \\u0441\\u0430\\u0439\\u0442\\u0443\",className:\"inputEdit\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:urlBook,onChange:function onChange(e){return setBook(e.target.value);},placeholder:\"URL \\u043F\\u043E\\u0441\\u0456\\u0431\\u043D\\u0438\\u043A\\u0430\",className:\"inputEdit\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u0406\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0456\\u044F\",value:info,onChange:function onChange(e){return setInfo(e.target.value);},className:\"inputEditText\"}),/*#__PURE__*/_jsx(\"div\",{className:\"postEditNav\",children:/*#__PURE__*/_jsx(\"button\",{className:\"postEditBtn\",onClick:submitHandler,children:\"\\u0417\\u0431\\u0435\\u0440\\u0435\\u0433\\u0442\\u0438\"})})]});};","map":{"version":3,"names":["axios","React","useEffect","useCallback","useState","useDispatch","useNavigate","useParams","updatePost","toast","EditPostPage","model","setModel","urlOff","setOff","urlBook","setBook","info","setInfo","dispatch","navigate","params","fetchPost","get","id","data","submitHandler","updatedPost","FormData","append","error","console","log","e","preventDefault","target","value"],"sources":["/Users/andrepetlovany/Desktop/GIT/elx/client/src/pages/EditPostPage.jsx"],"sourcesContent":["import axios from '../utils/axios';\nimport React, { useEffect } from 'react';\nimport { useCallback, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport '../index.css'\nimport { updatePost } from '../redux/features/post/postSlice';\nimport { toast } from 'react-toastify';\n\nexport const EditPostPage = () => {\n\n    const [model, setModel] = useState('')\n    const [urlOff, setOff] = useState('')\n    const [urlBook, setBook] = useState('')\n    const [info, setInfo] = useState('')\n\n    const dispatch = useDispatch()\n    const navigate = useNavigate()\n    const params = useParams()\n\n    const fetchPost = useCallback(async () => {\n        const { data } = await axios.get(`/posts/${params.id}`)\n        setModel(data.model)\n        setInfo(data.info)\n        setOff(data.urlOff)\n        setBook(data.urlBook)\n    }, [params.id])\n\n    const submitHandler = () => {\n        try {\n            const updatedPost = new FormData()\n            updatedPost.append('model', model)\n            updatedPost.append('info', info)\n            updatedPost.append('urlOff', urlOff)\n            updatedPost.append('urlBook', urlBook)\n            updatedPost.append('id', params.id)\n            dispatch(updatePost(updatedPost))\n            navigate('/posts')\n            toast('Запис успішно оновлено')\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    useEffect(() => {\n        fetchPost()\n    }, [fetchPost])\n\n\n    return (\n        <form\n            className='postsEdit'\n            onSubmit={(e) => e.preventDefault()}\n        >\n            <input type='text' value={model} onChange={(e) => setModel(e.target.value)} placeholder='Модель' className='inputEdit model'></input>\n            <input type='text' value={urlOff} onChange={(e) => setOff(e.target.value)} placeholder='URL офф сайту' className='inputEdit'></input>\n            <input type='text' value={urlBook} onChange={(e) => setBook(e.target.value)} placeholder='URL посібника' className='inputEdit'></input>\n            <textarea placeholder='Інформація' value={info} onChange={(e) => setInfo(e.target.value)} className='inputEditText'></textarea>\n            \n            <div className='postEditNav'>\n                <button className='postEditBtn' onClick={submitHandler}>Зберегти</button>\n            </div>\n        </form>\n    \n        )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}