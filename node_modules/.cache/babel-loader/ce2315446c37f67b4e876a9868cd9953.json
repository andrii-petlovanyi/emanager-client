{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andrepetlovany/Desktop/GIT/elx/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useCallback}from'react';import Moment from'react-moment';import{Link,useParams,useNavigate}from'react-router-dom';import axios from'../utils/axios';import'../index.css';import{useSelector,useDispatch}from'react-redux';import{AiFillDelete}from'react-icons/ai';import{removePost}from'../redux/features/post/postSlice';import{toast}from'react-toastify';import{AiOutlineRead,AiOutlineStar,AiOutlineCheck,AiOutlineFileImage,AiOutlineEdit}from'react-icons/ai';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var PostPage=function PostPage(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var params=useParams();var navigate=useNavigate();var dispatch=useDispatch();var removePostHandler=function removePostHandler(){try{dispatch(removePost(params.id));toast('Запис видалено');navigate('/');}catch(error){console.log(error);}};var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var fetchPost=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/posts/\".concat(params.id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setPost(data);case 5:case\"end\":return _context.stop();}}},_callee);})),[params.id]);useEffect(function(){fetchPost();},[fetchPost]);if(!post){return/*#__PURE__*/_jsx(\"div\",{className:\"postViewMain\",children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"postViewMain\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn_enter\",children:[/*#__PURE__*/_jsx(Link,{className:\"link-item\",to:'/',children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"postView\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postHeader\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"postTitle\",children:[/*#__PURE__*/_jsx(AiOutlineStar,{size:25,style:{marginRight:'10px'}}),post.model]}),/*#__PURE__*/_jsx(Moment,{date:post.createdAt,format:\"D MMM YYYY\",className:\"postData\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"postBlock\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"postBlockUrl\",children:/*#__PURE__*/_jsxs(\"a\",{href:post.urlOff,rel:\"noreferrer noopener\",target:\"_blank\",children:[/*#__PURE__*/_jsx(AiOutlineCheck,{size:25,style:{marginRight:'10px'}}),post.urlOff]})}),/*#__PURE__*/_jsx(\"div\",{className:\"postBlockUrl\",children:/*#__PURE__*/_jsxs(\"a\",{href:post.urlBook,rel:\"noreferrer noopener\",target:\"_blank\",children:[/*#__PURE__*/_jsx(AiOutlineRead,{size:25,style:{marginRight:'10px'}}),post.urlBook]})}),/*#__PURE__*/_jsx(\"div\",{className:\"postBlockUrl\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(AiOutlineFileImage,{size:25,style:{marginRight:'10px'}}),\"URL img\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"postText\",children:/*#__PURE__*/_jsx(\"p\",{children:post.info})})]})]}),/*#__PURE__*/_jsx(\"div\",{children:(user===null||user===void 0?void 0:user._id)===post.author&&/*#__PURE__*/_jsxs(\"div\",{className:\"btnViewNav\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"BtnViewEdit\",children:/*#__PURE__*/_jsx(Link,{to:\"/\".concat(params.id,\"/edit\"),children:/*#__PURE__*/_jsx(AiOutlineEdit,{size:20,style:{color:'#fff'}})})}),/*#__PURE__*/_jsx(\"button\",{className:\"BtnDelEdit\",onClick:removePostHandler,children:/*#__PURE__*/_jsx(AiFillDelete,{size:20,style:{color:'#fff'}})})]})})]});};","map":{"version":3,"names":["React","useEffect","useState","useCallback","Moment","Link","useParams","useNavigate","axios","useSelector","useDispatch","AiFillDelete","removePost","toast","AiOutlineRead","AiOutlineStar","AiOutlineCheck","AiOutlineFileImage","AiOutlineEdit","PostPage","post","setPost","params","navigate","dispatch","removePostHandler","id","error","console","log","state","auth","user","fetchPost","get","data","marginRight","model","createdAt","urlOff","urlBook","info","_id","author","color"],"sources":["/Users/andrepetlovany/Desktop/GIT/elx/client/src/pages/PostPaige.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useCallback } from 'react';\nimport Moment from 'react-moment';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport axios from '../utils/axios';\nimport '../index.css'\nimport { useSelector, useDispatch } from 'react-redux';\nimport { AiFillDelete } from 'react-icons/ai';\nimport { removePost } from '../redux/features/post/postSlice';\nimport { toast } from 'react-toastify'\nimport { AiOutlineRead, AiOutlineStar, AiOutlineCheck, AiOutlineFileImage, AiOutlineEdit } from 'react-icons/ai'\n\nexport const PostPage = () => {\n\n    const [post, setPost] = useState(null)\n    const params = useParams()\n    const navigate = useNavigate()\n    const dispatch = useDispatch()\n\n    const removePostHandler = () => {\n        try {\n            dispatch(removePost(params.id))\n            toast('Запис видалено')\n            navigate('/')\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n\n    const {user} = useSelector((state) => state.auth)\n\n    const fetchPost = useCallback(async () => {\n        const { data } = await axios.get(`/posts/${params.id}`)\n        setPost(data)\n    }, [params.id])\n\n    useEffect(() => {\n        fetchPost()\n    }, [fetchPost])\n\n    if (!post) {\n        return (\n            <div className='postViewMain'>\n                Завантаження...\n            </div>\n        )\n    }\n    return (\n        <div className='postViewMain'>\n            <div>\n                <button className='btn_enter'><Link className='link-item' to={'/'}>Назад</Link> </button>\n            </div>\n                    \n            <div className=\"postView\">\n                <div className=\"postHeader\">\n                    <h3 className=\"postTitle\"><AiOutlineStar size={25} style={{ marginRight:'10px'}} />{post.model}</h3>\n                    <Moment date={post.createdAt} format='D MMM YYYY' className=\"postData\"/>\n                </div>\n                <div className=\"postBlock\">\n                    <div className=\"postBlockUrl\"><a href={post.urlOff} rel='noreferrer noopener' target='_blank'><AiOutlineCheck size={25} style={{ marginRight:'10px'}}/>{post.urlOff}</a></div>\n                    <div className=\"postBlockUrl\"><a href={post.urlBook} rel='noreferrer noopener' target='_blank'><AiOutlineRead size={25} style={{ marginRight:'10px'}}/>{post.urlBook}</a></div>\n                    <div className=\"postBlockUrl\"><p><AiOutlineFileImage size={25} style={{ marginRight:'10px'}} />URL img</p></div>\n                    <div className=\"postText\"><p>{post.info}</p></div>\n                </div>\n            </div>       \n            <div>\n                {\n                user?._id === post.author && (\n                    <div className='btnViewNav'>\n                        <button className='BtnViewEdit'><Link to={`/${params.id}/edit`}><AiOutlineEdit size={20} style={{ color:'#fff'}} /></Link></button>\n                        <button className='BtnDelEdit' onClick={removePostHandler}><AiFillDelete size={20} style={{ color:'#fff'}}/></button>\n                    </div>\n                    )\n                 }\n            </div>  \n        </div>\n        )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}